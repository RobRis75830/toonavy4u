<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE-edge">
<meta name="viewport" content="width = device-width, initial-scale = 1">

<title>Welcome to Toonavy4U</title>

<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="css/myStyle.css">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
    <div id="header"></div>    
    <script>
        $(function(){ $("#header").load("Toolbar.html") });
    </script>
   <br>
 
    
    
    
    
    <div class="container">
        <div class="row">
            <div class="col-md-12">
               <div class="pull-left mr-3"><img src="images/profilePic.png"/></div>
               <div class="pull-left">
                    <h4 class = "username" th:text="${#strings.substringBefore(userName,'@')}"></h4>
                   <p th:text="'Followers: '+${followNumber}">Followers: 33</p> <a  class="btn btn-primary ml-3"th:text="${follow}?'Unfollow':'Follow'"  th:href="'follows?profileEmail=' + ${userName}" th:style="${editable||!#authorization.expression('isAuthenticated()')}?'display:none':'display:normal'"></a>
                </div>
            </div>
        </div>
        <br>
            <!--Subscribed Series-->
        <h3><a href="#subSeriesContent" data-toggle="collapse" th:style="${editable} ? 'display:normal' : 'display:none'">Subscribed Series</a></h3>
        <div class="comiclist collapse show" id="subSeriesContent" th:style="${editable} ? 'display:normal' : 'display:none'">
            <div th:each="subseries,iterStat:${subedseries}" class="col-md-9 col-sm-6 col-6">

                <div class="col-md-3 col-sm-6 col-6">
                    <a th:href="'ViewSeries?seriesId='+${subseries.id}">
                        <img class="img-fluid img-thumbnail" th:src="${subcover[iterStat.index]}">
                    </a>
                </div>

                <a  th:href="'ViewSeries?seriesId='+${subseries.id}">
                    <h5 th:text="'Series: '+${subseries.title}"></h5>
                </a>
                <a href="#"th:href="'Profile?profileEmail=' + ${subseries.owner}">
                    <p class="username" th:text="'owner: '+${#strings.substringBefore(subseries.owner,'@')}">by username123</p>
                </a>
                <p th:text="'description: '+ ${subseries.description}">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                <button type="button" class="btn btn-danger">Unsubscribe</button>
                <div class="col-12 ml-3 mt-2">
                    <a href="#mySeries1Content" data-toggle="collapse">
                        Chapters
                    </a>
                </div>

                <div class="row ml-1 mt-1 collapse" id="mySeries1Content">
                    <div class="col-lg-2 col-md-3 col-sm-6 col-xs-6"th:each="suballcomic:${suballcomic[iterStat.index]}">
                        <a th:href="'ViewComic?comicId=' + ${suballcomic.id}">
                            <img class="img-fluid img-thumbnail" th:src="${(subchapterCover[iterStat.index])[suballcomicStat.index]}"src="images/thumbnail.jpg">
                            <h5 th:text="${suballcomic.title}" > Chapter 1</h5>
                        </a>

                    </div>
                </div>
            </div>

        </div>
                
    <br>
        <div class="row">
            <!--Created-->
            <div class="col-12 mb-5">
                <h3><a href="#createSeriesContent" data-toggle="collapse">Created Series</a></h3>
                <div class="comiclist collapse show" id="createSeriesContent">

                    <div class="row mt-3" id="mySeries1Row">

                        <div th:each="series,iterStat:${creatSeries}" class="col-md-9 col-sm-6 col-6">

                        <div class="col-md-3 col-sm-6 col-6">
                            <a th:href="'ViewSeries?seriesId='+${series.id}">
                                <img class="img-fluid img-thumbnail" th:src="${imageURL[iterStat.index]}">
                            </a>
                        </div>

                            <a  th:href="'ViewSeries?seriesId='+${series.id}">
                            <h5 th:text="'Series: '+${series.title}"></h5>
                            </a>
                            <a href="#"th:href="'Profile?profileEmail=' + ${series.owner}">
                            <p class="username" th:text="'owner: '+${#strings.substringBefore(series.owner,'@')}">by username123</p>
                            </a>
                            <p th:text="'description: '+ ${series.description}">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                            <button type="button" class="btn btn-warning" th:style="${editable} ? 'display:normal' : 'display:none'">Edit</button>
                            <button type="button" class="btn btn-danger" th:style="${editable} ? 'display:normal' : 'display:none'">Delete</button>
                            <div class="col-12 ml-3 mt-2">
                                <a href="#mySeries1Content" data-toggle="collapse">
                                    Chapters
                                </a>
                            </div>

                        <div class="row ml-1 mt-1 collapse" id="mySeries1Content">
                            <div class="col-lg-2 col-md-3 col-sm-6 col-xs-6"th:each="comics:${comic[iterStat.index]}">
                                <a th:href="'ViewComic?comicId=' + ${comics.id}">
                                    <img class="img-fluid img-thumbnail" th:src="${(chapterCover[iterStat.index])[comicsStat.index]}"src="images/thumbnail.jpg">
                                    <h5 th:text="${comics.title}" > Chapter 1</h5>
                                </a>
                                <button type="button" class="btn btn-warning btn-sm" th:style="${editable} ? 'display:normal' : 'display:none'">Edit</button>
                                <button type="button" class="btn btn-danger btn-sm" th:style="${editable} ? 'display:normal' : 'display:none'">Delete</button>

                            </div>
                        </div>
                        </div>






                    </div>
                </div>
            </div>
        </div>
    </div>
    
    


</body>
</html>
<script>
    function followUnfollow() {
        var follower=document.getElementById("usersName").value;

            document.getElementById("follower").value = follower;
            document.getElementById("followForm").submit();

    }
</script>